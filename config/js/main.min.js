(function(){loadConfiguration();setEventHandlers()})();function loadConfiguration(){if(localStorage.config){$("#bgcolor")[0].value=localStorage.bgcolor;$("#time24hours")[0].checked=localStorage.time24hours==="1";$("#showcalendar")[0].checked=localStorage.showcalendar==="1";$("#changequote")[0].value=localStorage.changequote;window.quotes=JSON.parse(localStorage.quotes);refreshquotes()}else{console.log("No configuration saved.")}}function saveConfiguration(a){localStorage.config=true;localStorage.bgcolor=a.bgcolor;localStorage.time24hours=a.time24hours;localStorage.showcalendar=a.showcalendar;localStorage.changequote=a.changequote;localStorage.quotes=JSON.stringify(window.quotes)}function refreshquotes(){console.log("Refreshing quotes "+window.quotes);$(".item_quote").remove();if(quotes.length!=0){$("#addquoteDOWN").css("display","block")}else{$("#addquoteDOWN").hide()}for(var a=0;a<window.quotes.length;a++){$("#addQuoteDialogUP").after('<label class="item item_quote"><blockquote><p>'+window.quotes[a][0]+"</p><footer><strong>"+window.quotes[a][1]+'</strong></footer></blockquote><div class="delete-item" id="deletequote'+a+'"><input type="hidden" id="index" value="'+a+'"></div></label>');$("#deletequote"+a).on("click",function(){var b=$(this).children("#index").val();console.log("Delete item called on "+b);window.quotes.splice(b,1);refreshquotes()})}$("#addQuoteDialogUP").hide();$("#addQuoteDialogDOWN").hide()}function setEventHandlers(){var a=$("#save_button");a.on("click",function(){var e=$("#time24hours")[0].checked?1:0,b=$("#showcalendar")[0].checked?1:0,d=parseInt($("#changequote").val()),c={bgcolor:$("#bgcolor").val(),time24hours:e,showcalendar:b,changequote:d,quotes:window.quotes};saveConfiguration(c);location.href="pebblejs://close#"+encodeURIComponent(JSON.stringify(c))});$("#addquoteUP").on("click",function(){$("#quoteUP").focus();$("#addQuoteDialogUP").toggle();$("#addQuoteDialogDOWN").hide();location.href="#addQuoteDialogAnchorUP"});$("#addquoteDOWN").on("click",function(){$("#quoteDOWN").focus();$("#addQuoteDialogUP").hide();$("#addQuoteDialogDOWN").toggle();location.href="#addQuoteDialogAnchorDOWN"});$("#addquoteconfirmUP").on("click",function(){var b=$("#quoteUP").val(),c=$("#authorUP").val();if(b.length!=0&&c.length!=0){window.quotes.push([b,c]);$("#quoteUP").val("");$("#authorUP").val("");refreshquotes()}else{console.log("Add a valid author and quote.")}});$("#addquoteconfirmDOWN").on("click",function(){var b=$("#quoteDOWN").val(),c=$("#authorDOWN").val();if(b.length!=0&&c.length!=0){window.quotes.unshift([b,c]);$("#quoteDOWN").val("");$("#authorDOWN").val("");refreshquotes()}else{console.log("Add a valid author and quote.")}});$("#addquotecancelUP").on("click",function(){$("#quoteUP").val("");$("#authorUP").val("");$("#addQuoteDialogUP").hide()});$("#addquotecancelDOWN").on("click",function(){$("#quoteDOWN").val("");$("#authorDOWN").val("");$("#addQuoteDialogDOWN").hide()})};